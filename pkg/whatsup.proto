syntax = "proto3";

package whatsup;

option go_package = "whatsup/whatsup"; // mutes a compiler warning
// -----------------WhatsUp service-----------------

message Success {
    bool ok = 1;
}

message UserList {
    repeated string users = 1;
}

message Registration {
    string source_user = 1;
}

message AuthToken {
    string token = 1;
}

message Empty {}

// Single chat 
message ChatMessage {
    string user = 1;  // sender's username
    string body = 2;  // message content
}

// Multiple ChatMessage
message ChatMessages {
    repeated ChatMessage messages = 1;
}

service WhatsUp {
    // Connect to server, get token
    rpc Connect(Registration) returns (AuthToken);

    // Send message
    rpc Send(ChatMessage) returns (Success);

    // Fetch all messages
    rpc Fetch(Empty) returns (ChatMessages);

    // Get users
    rpc List(Empty) returns (UserList);

    // Disconnected
    rpc Disconnect(Empty) returns (Success);
}
